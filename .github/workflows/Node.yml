name: Node

concurrency:
    group: Node-${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: true

permissions:
    security-events: write
    contents: write
    pull-requests: write

on:
    workflow_dispatch:
    push:
        branches: [Current]
    pull_request:
        branches: [Current]
    workflow_call:

jobs:
    Pre-Publish:
        runs-on: ubuntu-latest

        env:
            ADBLOCK: true
            ASTRO_TELEMETRY_DISABLED: 1
            AUTOMATEDLAB_TELEMETRY_OPTOUT: 1
            AZURE_CORE_COLLECT_TELEMETRY: 0
            CHOOSENIM_NO_ANALYTICS: 1
            DIEZ_DO_NOT_TRACK: 1
            DOTNET_CLI_TELEMETRY_OPTOUT: 1
            DOTNET_INTERACTIVE_CLI_TELEMETRY_OPTOUT: 1
            DO_NOT_TRACK: 1
            ET_NO_TELEMETRY: 1
            GATSBY_TELEMETRY_DISABLED: 1
            GATSBY_TELEMETRY_OPTOUT: 1
            GATSBY_TELEMETRY_OPT_OUT: 1
            GRIT_TELEMETRY_DISABLED: 1
            HASURA_GRAPHQL_ENABLE_TELEMETRY: false
            HINT_TELEMETRY: off
            HOMEBREW_NO_ANALYTICS: 1
            INFLUXD_REPORTING_DISABLED: true
            ITERATIVE_DO_NOT_TRACK: 1
            NEXT_TELEMETRY_DEBUG: 1
            NEXT_TELEMETRY_DISABLED: 1
            NG_CLI_ANALYTICS: false
            NUXT_TELEMETRY_DISABLED: 1
            PIN_DO_NOT_TRACK: 1
            POWERSHELL_TELEMETRY_OPTOUT: 1
            SAM_CLI_TELEMETRY: 0
            STNOUPGRADE: 1
            STRIPE_CLI_TELEMETRY_OPTOUT: 1
            TELEMETRY_DISABLED: 1

        strategy:
            matrix:
                node-version: [18, 19, 20]

        steps:
            - uses: actions/checkout@v4.1.4

            - uses: pnpm/action-setup@v3.0.0
              with:
                  version: 8.15.5
                  run_install: |
                      - recursive: true
                        args: [
                          --link-workspace-packages=true,
                          --lockfile-only,
                          --prefer-frozen-lockfile=false,
                          --shamefully-hoist=false,
                          --shared-workspace-lockfile=true,
                          --strict-peer-dependencies=false,
                          --unsafe-perm=true
                        ]

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./authenticationprovider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./authenticationprovider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-authenticationprovider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./authenticationprovider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./basic-multi-root-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./basic-multi-root-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-basic-multi-root-sample-Node-${{ matrix.node-version }}-Target
                  path: ./basic-multi-root-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./call-hierarchy-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./call-hierarchy-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-call-hierarchy-sample-Node-${{ matrix.node-version }}-Target
                  path: ./call-hierarchy-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./chat-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./chat-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-chat-sample-Node-${{ matrix.node-version }}-Target
                  path: ./chat-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./code-actions-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./code-actions-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-code-actions-sample-Node-${{ matrix.node-version }}-Target
                  path: ./code-actions-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./codelens-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./codelens-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-codelens-sample-Node-${{ matrix.node-version }}-Target
                  path: ./codelens-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./comment-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./comment-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-comment-sample-Node-${{ matrix.node-version }}-Target
                  path: ./comment-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./completions-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./completions-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-completions-sample-Node-${{ matrix.node-version }}-Target
                  path: ./completions-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./configuration-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./configuration-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-configuration-sample-Node-${{ matrix.node-version }}-Target
                  path: ./configuration-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./contentprovider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./contentprovider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-contentprovider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./contentprovider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./custom-data-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./custom-data-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-custom-data-sample-Node-${{ matrix.node-version }}-Target
                  path: ./custom-data-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./custom-editor-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./custom-editor-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-custom-editor-sample-Node-${{ matrix.node-version }}-Target
                  path: ./custom-editor-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./decorator-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./decorator-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-decorator-sample-Node-${{ matrix.node-version }}-Target
                  path: ./decorator-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./diagnostic-related-information-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./diagnostic-related-information-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-diagnostic-related-information-sample-Node-${{ matrix.node-version }}-Target
                  path: ./diagnostic-related-information-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./document-editing-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./document-editing-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-document-editing-sample-Node-${{ matrix.node-version }}-Target
                  path: ./document-editing-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./document-paste/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./document-paste

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-document-paste-Node-${{ matrix.node-version }}-Target
                  path: ./document-paste/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./drop-on-document/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./drop-on-document

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-drop-on-document-Node-${{ matrix.node-version }}-Target
                  path: ./drop-on-document/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extension-terminal-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extension-terminal-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-extension-terminal-sample-Node-${{ matrix.node-version }}-Target
                  path: ./extension-terminal-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./fsconsumer-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./fsconsumer-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-fsconsumer-sample-Node-${{ matrix.node-version }}-Target
                  path: ./fsconsumer-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./fsprovider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./fsprovider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-fsprovider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./fsprovider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./getting-started-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./getting-started-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-getting-started-sample-Node-${{ matrix.node-version }}-Target
                  path: ./getting-started-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./github-authentication-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./github-authentication-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-github-authentication-sample-Node-${{ matrix.node-version }}-Target
                  path: ./github-authentication-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./helloworld-minimal-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./helloworld-minimal-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-helloworld-minimal-sample-Node-${{ matrix.node-version }}-Target
                  path: ./helloworld-minimal-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./helloworld-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./helloworld-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-helloworld-sample-Node-${{ matrix.node-version }}-Target
                  path: ./helloworld-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./helloworld-test-cli-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./helloworld-test-cli-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-helloworld-test-cli-sample-Node-${{ matrix.node-version }}-Target
                  path: ./helloworld-test-cli-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./helloworld-test-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./helloworld-test-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-helloworld-test-sample-Node-${{ matrix.node-version }}-Target
                  path: ./helloworld-test-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./helloworld-web-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./helloworld-web-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-helloworld-web-sample-Node-${{ matrix.node-version }}-Target
                  path: ./helloworld-web-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./inline-completions/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./inline-completions

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-inline-completions-Node-${{ matrix.node-version }}-Target
                  path: ./inline-completions/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./jupyter-kernel-execution-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./jupyter-kernel-execution-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-jupyter-kernel-execution-sample-Node-${{ matrix.node-version }}-Target
                  path: ./jupyter-kernel-execution-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./jupyter-server-provider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./jupyter-server-provider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-jupyter-server-provider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./jupyter-server-provider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./l10n-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./l10n-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-l10n-sample-Node-${{ matrix.node-version }}-Target
                  path: ./l10n-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./language-configuration-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./language-configuration-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-language-configuration-sample-Node-${{ matrix.node-version }}-Target
                  path: ./language-configuration-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-language-service/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-language-service/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-language-service-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-language-service/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-language-service/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-language-service

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-language-service-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-language-service/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-language-service/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-language-service/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-language-service-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-language-service/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-request-forwarding/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-request-forwarding/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-request-forwarding-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-request-forwarding/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-request-forwarding/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-request-forwarding

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-request-forwarding-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-request-forwarding/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-embedded-request-forwarding/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-embedded-request-forwarding/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-embedded-request-forwarding-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-embedded-request-forwarding/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-log-streaming-sample/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-log-streaming-sample/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-log-streaming-sample-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-log-streaming-sample/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-log-streaming-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-log-streaming-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-log-streaming-sample-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-log-streaming-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-log-streaming-sample/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-log-streaming-sample/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-log-streaming-sample-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-log-streaming-sample/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-multi-server-sample/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-multi-server-sample/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-multi-server-sample-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-multi-server-sample/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-multi-server-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-multi-server-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-multi-server-sample-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-multi-server-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-multi-server-sample/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-multi-server-sample/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-multi-server-sample-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-multi-server-sample/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-sample/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-sample/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-sample-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-sample/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-sample-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-sample/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-sample/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-sample-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-sample/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-user-input-sample/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-user-input-sample/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-user-input-sample-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-user-input-sample/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-user-input-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-user-input-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-user-input-sample-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-user-input-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-user-input-sample/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-user-input-sample/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-user-input-sample-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-user-input-sample/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-web-extension-sample/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-web-extension-sample/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-web-extension-sample-client-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-web-extension-sample/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-web-extension-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-web-extension-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-web-extension-sample-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-web-extension-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./lsp-web-extension-sample/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./lsp-web-extension-sample/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-lsp-web-extension-sample-server-Node-${{ matrix.node-version }}-Target
                  path: ./lsp-web-extension-sample/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./nodefs-provider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./nodefs-provider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-nodefs-provider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./nodefs-provider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./notebook-extend-markdown-renderer-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./notebook-extend-markdown-renderer-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-notebook-extend-markdown-renderer-sample-Node-${{ matrix.node-version }}-Target
                  path: ./notebook-extend-markdown-renderer-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./notebook-renderer-react-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./notebook-renderer-react-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-notebook-renderer-react-sample-Node-${{ matrix.node-version }}-Target
                  path: ./notebook-renderer-react-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./notebook-renderer-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./notebook-renderer-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-notebook-renderer-sample-Node-${{ matrix.node-version }}-Target
                  path: ./notebook-renderer-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./notebook-serializer-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./notebook-serializer-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-notebook-serializer-sample-Node-${{ matrix.node-version }}-Target
                  path: ./notebook-serializer-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./notifications-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./notifications-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-notifications-sample-Node-${{ matrix.node-version }}-Target
                  path: ./notifications-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./pnpm-lock.yaml

            - run: pnpm install
              working-directory: .

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-Node-${{ matrix.node-version }}-Target
                  path: ./Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./product-icon-theme-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./product-icon-theme-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-product-icon-theme-sample-Node-${{ matrix.node-version }}-Target
                  path: ./product-icon-theme-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./progress-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./progress-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-progress-sample-Node-${{ matrix.node-version }}-Target
                  path: ./progress-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./proposed-api-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./proposed-api-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-proposed-api-sample-Node-${{ matrix.node-version }}-Target
                  path: ./proposed-api-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./quickinput-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./quickinput-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-quickinput-sample-Node-${{ matrix.node-version }}-Target
                  path: ./quickinput-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./semantic-tokens-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./semantic-tokens-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-semantic-tokens-sample-Node-${{ matrix.node-version }}-Target
                  path: ./semantic-tokens-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./shell-integration-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./shell-integration-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-shell-integration-sample-Node-${{ matrix.node-version }}-Target
                  path: ./shell-integration-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./snippet-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./snippet-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-snippet-sample-Node-${{ matrix.node-version }}-Target
                  path: ./snippet-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./source-control-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./source-control-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-source-control-sample-Node-${{ matrix.node-version }}-Target
                  path: ./source-control-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./statusbar-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./statusbar-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-statusbar-sample-Node-${{ matrix.node-version }}-Target
                  path: ./statusbar-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./tabs-api-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./tabs-api-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-tabs-api-sample-Node-${{ matrix.node-version }}-Target
                  path: ./tabs-api-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./task-provider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./task-provider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-task-provider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./task-provider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./telemetry-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./telemetry-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-telemetry-sample-Node-${{ matrix.node-version }}-Target
                  path: ./telemetry-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./terminal-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./terminal-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-terminal-sample-Node-${{ matrix.node-version }}-Target
                  path: ./terminal-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./test-provider-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./test-provider-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-test-provider-sample-Node-${{ matrix.node-version }}-Target
                  path: ./test-provider-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./theme-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./theme-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-theme-sample-Node-${{ matrix.node-version }}-Target
                  path: ./theme-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./tree-view-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./tree-view-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-tree-view-sample-Node-${{ matrix.node-version }}-Target
                  path: ./tree-view-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./uri-handler-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./uri-handler-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-uri-handler-sample-Node-${{ matrix.node-version }}-Target
                  path: ./uri-handler-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./vim-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./vim-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-vim-sample-Node-${{ matrix.node-version }}-Target
                  path: ./vim-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./virtual-document-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./virtual-document-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-virtual-document-sample-Node-${{ matrix.node-version }}-Target
                  path: ./virtual-document-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./wasm-component-model/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./wasm-component-model

            - run: pnpm run build
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-component-model-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-component-model/Target

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-component-model-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-component-model/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./wasm-language-server/client/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./wasm-language-server/client

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-language-server-client-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-language-server/client/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./wasm-language-server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./wasm-language-server

            - run: pnpm run build
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-language-server-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-language-server/Target

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-language-server-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-language-server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./wasm-language-server/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./wasm-language-server/server

            - run: pnpm run build
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-language-server-server-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-language-server/server/Target

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-wasm-language-server-server-Node-${{ matrix.node-version }}-Target
                  path: ./wasm-language-server/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./webpack-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./webpack-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-webpack-sample-Node-${{ matrix.node-version }}-Target
                  path: ./webpack-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./webview-codicons-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./webview-codicons-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-webview-codicons-sample-Node-${{ matrix.node-version }}-Target
                  path: ./webview-codicons-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./webview-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./webview-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-webview-sample-Node-${{ matrix.node-version }}-Target
                  path: ./webview-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./webview-view-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./webview-view-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-webview-view-sample-Node-${{ matrix.node-version }}-Target
                  path: ./webview-view-sample/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./welcome-view-content-sample/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./welcome-view-content-sample

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.3
              with:
                  name: .-welcome-view-content-sample-Node-${{ matrix.node-version }}-Target
                  path: ./welcome-view-content-sample/Target
